@model EZRAC.Risk.UI.Web.ViewModels.Admin.CompanyViewModel
<div class="row tab-wrapper">
    <div class="col-sm-12">
        <ul class="nav nav-tabs nav-tabs-horizontal" id="nav-tabs-wrapper">
            @*<li class="active"><a data-toggle="tab" href="#adminProfile">PROFILE</a></li>*@

        </ul>
        <div class="tab-content container-fluid no-padding">
            <h4 class="padding-left-15 padding-vertical-15" id="heddinglable"></h4>
            @*UpdateTargetId = "CompanyList",*@
            @using (Ajax.BeginForm("AddUpdateCompany", new { Controller = "Company", area = "Admin" }, new AjaxOptions { OnSuccess = "resetCompanyForm()", UpdateTargetId = "CompanyList", HttpMethod = "Post", OnFailure = "onErrorHandler(xhr)" }, new { @class = "form-horizontal cla-form top20 bottom20", @id = "company-info-form" }))
            {

                @Html.AntiForgeryToken()
                @Html.HiddenFor(model => model.Id, new { @companyID = Model.Id, @class = "hiddenCompanyID" })
                <div id="adminProfile" class="tab-pane fade in active" role="tabpanel">
                    @*<form class="">*@
                    <div class="row bottom10">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(m => m.Name)<label style="color:red">*</label>
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0">
                                @Html.TextBoxFor(m => m.Name, new { @class = "form-control " })
                                @Html.ValidationMessageFor(m => m.Name)
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Abbr)<label style="color:red">*</label>
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0">
                                @Html.TextBoxFor(m => m.Abbr, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.Abbr)
                                <span class="field-validation-error" style="display:none" id="checkabbrcode">Abbr code already exists.</span>
                            </div>
                        </div>
                    </div>
                    <div class="row bottom10">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Address)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0">
                                @Html.TextAreaFor(m => m.Address, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.Address)
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.City)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0 ">
                                @Html.TextBoxFor(m => m.City, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.City)
                            </div>
                        </div>
                    </div>
                    <div class="row bottom10">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.State)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0">
                                @Html.TextBoxFor(m => m.State, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.State)
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Zip)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0 ">
                                @Html.TextBoxFor(m => m.Zip, new { @class = "form-control ", placeholder = "e.g. XXXXX-XXXX" })
                                @Html.ValidationMessageFor(model => model.Zip)
                            </div>
                        </div>
                    </div>
                    <div class="row bottom10">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Phone)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0">
                                @Html.TextBoxFor(m => m.Phone, new { @class = "form-control ", placeholder = "e.g. XXX-XXX-XXXX" })
                                @Html.ValidationMessageFor(model => model.Phone)
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Fax)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0 ">
                                @Html.TextBoxFor(m => m.Fax, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.Fax)
                            </div>
                        </div>
                    </div>
                    <div class="row bottom10">
                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Website)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0">
                                @Html.TextBoxFor(m => m.Website, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.Website)
                            </div>
                        </div>
                        @*<div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                            <div class="col-xs-4 col-sm-5 col-md-5 col-lg-4 top5 padding-right-0">
                                @Html.LabelFor(model => model.Zurich)
                            </div>
                            <div class="col-xs-8 col-sm-7 col-md-7 col-lg-8 padding-left-0 ">
                                @Html.TextBoxFor(m => m.Zurich, new { @class = "form-control " })
                                @Html.ValidationMessageFor(model => model.Zurich)
                            </div>
                        </div>*@
                    </div>
                    <div class="col-xs-12 bottom20 top15">
                        <button class="btn btn2 " disabled="disabled" id="cancel" type="button">CANCEL</button>
                        <input class="btn btn1 " disabled="disabled" id="Submitform" type="submit" value="SAVE" />
                    </div>
                    @*</form>*@
                </div>
            }
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $.validator.setDefaults({
            ignore: []
        });
        $.validator.unobtrusive.parse("#company-info-form");

        $("#adminProfile input:text,textarea").on("input", function () {
            RemoveDisableButton();
        });
        $("#cancel").on("click", function () {
            //var flag = confirm("Do you want to discard changes?");
            ShowConfirmBox("Do you want to discard changes?", true, resetCompanyForm);
            //if (flag) {
            //    resetCompanyForm();
            //}
            //$("#tblCompanyList tbody").find(".grey_bg td").closest("tr").click();
        });
        $("#Submitform").on("click", function () {
            var txtAbbr = $.trim($("#CompanyEditProfile #Abbr").val());
            var flag = false;
            var currentSelectedCompanyId = $("#CompanyEditProfile .hiddenCompanyID").val();
            $("#tblCompanyList tbody").find(".abbr").each(function () {
                var loopId = $(this).closest("tr").find(".companyID").val();
                var Abbr = $.trim($(this).text());
                if (txtAbbr.toLowerCase() == Abbr.toLowerCase() && currentSelectedCompanyId != loopId) {
                    flag = true;
                    return false;
                }
                $("#checkabbrcode").hide();
            });
            if (flag) {
                $("#checkabbrcode").show();
                return false;
            }
            else {
                return true;
            }
        });
    })
</script>