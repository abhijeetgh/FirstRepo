@model IList<EZRAC.Risk.UI.Web.ViewModels.Claims.UserActionLogViewModel>
<!-- cla-modpopup --->
<link href="@Url.Content("~/Content/dataTable.css")" rel="stylesheet" />
<script src="@Url.Content("~/Scripts/jquery-dataTable.js")" type="text/javascript"></script>
<div class="modal fade cla-modpopup" id="claimEventModel" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"></button>
                <h4 class="modal-title">Events for claim :   @ViewBag.CompanyAbbreviation-@ViewBag.ClaimId</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-xs-12 update-claim-form">
                        @*<form class="form-inline cla-form" role="form">*@
                        @using (Ajax.BeginForm("GetClaims", new { }, new AjaxOptions { UpdateTargetId = "divClaimEvents", HttpMethod = "POST", OnFailure = "onErrorHandler(xhr)" }, new { @class = "form-inline cla-form", @id = "driver-info-form" }))
                        {
                            @Html.AntiForgeryToken();
                            @*<div class="form-group">
                                    <label class="control-label"><strong>Filter</strong></label>
                                    <select class="form-control ncl-slect selectpicker" data-live-search="true" title="Please select">
                                        <option>Select 1</option>
                                        <option>Select 2</option>
                                        <option>Select 3</option>
                                    </select>
                                </div>*@
                            <div class="form-group ">

                                <label class="control-label"><strong>From</strong></label>
                                <div class="sandbox-container">
                                    <input type="text" name="FromDate" class="form-control sand-datepicker datepicker" id="FromDate" style="margin-left:7px;">
                                </div>
                            </div>
                            <div class="form-group inline-form-space">
                                <label class="control-label"><strong>To</strong></label>
                                <div class="sandbox-container">
                                    <input type="text" name="ToDate" class="form-control sand-datepicker datepicker" id="ToDate" style="margin-left:7px;">
                                </div>
                            </div>
                            
                            <div class="form-group inline-form-space">
                                <button type="submit" class="btn btn2 padding-horizontal-30" title="Show" id="showEvents">SHOW</button>
                                <button type="reset" id="resetForm" class="btn btn2 padding-horizontal-30">RESET</button>
                            </div>
                              <div class="form-group inline-form-space">(Leave both blank for all dates)</div>                          
                            <input type="hidden" id="ClaimId" name="ClaimId" value="@ViewBag.ClaimId" />                      
                            @*</form>*@
                        }
                        @*<div class="clearfix info" style="clear:both"> Leave both blank for all dates</div>
                        <br />*@
                    </div>      
                    <span class="errorMsg" id="claimEventError" style="margin-left:19px;"></span>                           
                    @*<div class="input-type-search-icon input-icon">
                        <input type="text" class="form-control input-type-search" style="margin-bottom:5px;" placeholder="Search" id="searchTxt" />
                        <span id="searchResult"></span>
                    </div>*@
                    <div class="col-xs-12" id="divClaimEvents">
                    </div>
                </div>
            </div>
        </div>
    </div>    
    <script type="text/javascript">
        $(document).ready(function (e) {

            $(".selectpicker").selectpicker({});

            var dateToday = new Date();
            $(".sand-datepicker").datepicker({
                maxDate: dateToday                
            });

            $("#showEvents").on("click", function (event) {
                if (Date.parse($("#FromDate").val()) > Date.parse($("#ToDate").val())) {
                    $("#claimEventError").text("'From Date' should be less than 'To Date'");
                    $("#divClaimEvents").html("");
                    event.preventDefault();
                }
                else {
                    $("#claimEventError").text("");
                }
            });
        });
    </script>
